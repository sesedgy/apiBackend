<Window x:Class="GeneralModel.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление миграциями" WindowStartupLocation="CenterScreen"  Height="500" Width="800" Name="MainWindows" WindowState="Normal" ResizeMode="CanResize">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Name="WindowGrid">
            <Grid Margin="0,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>

                <Border BorderBrush="Black" BorderThickness="1" Height="auto" Margin="10,10,10,10" VerticalAlignment="Top" HorizontalAlignment="Stretch" Width="auto" Grid.Row="0">
                    <Grid>
                        <Label x:Name="Label1" Content="Connection string" HorizontalAlignment="Left" Margin="10,7,0,0" VerticalAlignment="Top" Height="26" Width="104"/>
                        <TextBox x:Name="ConnectionString" Text="{Binding ConnectionString}" Height="auto" Width="auto" Margin="10,30,10,30" MinHeight="10" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
                        <Button x:Name="ConnectToDb" Content="Подключиться" IsEnabled="{Binding ConnectToDbBtnIsEnabled}" Command="{Binding ConnectToDbAndUpdateMigrationListCommand}" VerticalAlignment="Bottom" Height="20px" Width="90px" MinWidth="90px" MinHeight="20px" HorizontalAlignment="Right" Margin="0,0,10,5"/>
                    </Grid>
                </Border>

                <Border BorderBrush="Black" BorderThickness="1" Margin="10,0,10,10" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Row="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <DataGrid x:Name="DataGrid" AutoGenerateColumns="False" ItemsSource="{Binding MigrationList}" SelectedItem="{Binding SelectedMigration}" CanUserAddRows="False" CanUserResizeColumns="False" CanUserResizeRows="False"
                                  CanUserReorderColumns="False" Margin="10,10,10,10" MinHeight="290" CanUserDeleteRows="False" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Row="0">
                            <DataGrid.Columns>
                                <DataGridCheckBoxColumn Header="Накаченно" Width="80" IsReadOnly="True" Binding="{Binding Check}"></DataGridCheckBoxColumn>
                                <DataGridTextColumn Header="Название версии" Width="auto" IsReadOnly="True" Binding="{Binding Name}"></DataGridTextColumn>
                            </DataGrid.Columns>
                            <DataGrid.ContextMenu>
                                <ContextMenu >
                                    <MenuItem Header="Обновить до текущей версии" IsEnabled="{Binding UpdateDbToVersionBtnIsEnabled}" Command="{Binding UpdateDbToVersionCommand}" CommandParameter="{Binding ElementName=MainWindows, Path=(FocusManager.FocusedElement)}" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                        </DataGrid>
                        <Grid Grid.Row="1" Margin="0,0,0,10">
                            <TextBlock x:Name="ResultUpdate" Text="{Binding DbConnectAndDbUpdateStatus}" Foreground="DarkRed" TextWrapping="Wrap" Margin="10,0,225,5" VerticalAlignment="Stretch" Height="auto"/>
                            <Button x:Name="UpdateDbToLastVersion" IsEnabled="{Binding UpdateDbToVersionBtnIsEnabled}" Command="{Binding UpdateDbToLastVersionCommand}" Content="Обновить БД до последней версии" HorizontalAlignment="Right" Margin="0,0,10,5" VerticalAlignment="Bottom" Width="200px" MinWidth="200px"  Height="20px" MinHeight="20px"/>
                        </Grid>
                    </Grid>
                </Border>

            </Grid>
            <Grid Name="ProgressBarGrid" Visibility="{Binding ProgressBarVisibility}">
                <ProgressBar Height="18" Width="200" IsIndeterminate="True" />
            </Grid>
        </Grid>
    </ScrollViewer>
</Window>
